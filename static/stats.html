<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>dRonin Stats</title>
    <link href="/static/stylesheets/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="/static/lib/queue.v1.min.js"></script>
    <script src="/static/lib/nv.d3.min.js"></script>

    <style>
      body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        margin: auto;
        position: relative;
        width: 960px;
      }

      text {
        font: 10px sans-serif;
        stroke: none;
      }

      .axis path, .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
      }

      form {
        position: absolute;
        right: 10px;
        top: 10px;
      }

      div h2 {
        text-align: center;
      }

      #boards svg {
        height: 500px;
        width: 800px;
      }

      #oproc {
        float: right;
      }

      #oses svg {
        height: 200px;
        width: 300px;
      }

      #procs svg {
        height: 200px;
        width: 300px;
      }

      #versions svg {
        height: 450px;
        width: 500px;
      }

    </style>
  </head>

  <body>
    <div id="boards"><h2>Boards (<span id="totalboards">0</span> total)</h2><svg></svg></div>
    <div id="oproc">
      <div id="procs"><h2>Processors</h2><svg></svg></div>
      <div id="oses"><h2>OSes</h2><svg></svg></div>
    </div>
    <div id="versions"><h2>Versions</h2><svg></svg></div>
  </body>

  <script src="/static/js/report.js"></script>
  <script lang="javascript">
    d3.json("/api/usageStats", function(error, data) {
    if (error) return console.warn(error);
        var total = 0;
        d3.map(data['board']).forEach(function(k, v) { total += v; });
        d3.select("#totalboards").text(d3.format(",d")(total));
        drawBoardGraph(data);
        drawOSGraph(data);
        drawVersionGraph(data);
        drawProcessorGraph(data);

      });
  </script>
</html>
